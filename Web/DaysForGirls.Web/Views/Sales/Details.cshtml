@model SaleDetailsViewModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers


@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>

    .sale-general-info{
        display: inline-block;
        margin-top: 20px;
        margin-left: 100px;
        margin-bottom: 20px;
    }

        .sale-general-info div{
            float: left;
        }

        .sale-general-info img{
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 5px;
            width: 300px;
        }

        .sale-gen-image{
            margin-right: 20px;
        }

        .sale-gen-text{
            margin-top: 30px;
            margin-left: 100px;
            text-align: left;
        }
        .sale-gen-text h2{
            margin-bottom: 1px;
        }
        .sale-gen-text h4{
            margin-top: 1px;
        }

        #all-products-container{
        display: inline-block;
    }

    #product-holder{
        margin-top: 15px;
        margin-left: 75px;
        margin-bottom: 10px;
        float: left;
    }
    #product-holder img{
        width: 195px;
        height: 240px;
        margin-bottom: 1px;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 5px;
    }

    .product-info-holder{
        margin-top: 0;
        padding-top: 0;
        background-color: #ebebe0;
    }

    .product-info-holder a{
        text-decoration: none;
    }

    .product-info-holder h4{
        margin-left: 4px;
        margin-bottom: 2px;
        font-weight: 500;
        font-size: medium; 
    }

    .text-over-image{
        position: relative;
        text-align: center;
        font-weight: bold;
    }

    .text-bottom-right, .text-bottom-right-sold-out, .text-bottom-right-in-a-cart{
        /*background-color: crimson;*/
        color: whitesmoke;
        font-weight: 500;
        position: absolute;
        bottom: 10px;
        right: 0px;
    }
    .text-bottom-right{
        width: 60px;
        background-color: #62592c;
    }

    .text-bottom-right-sold-out{
        width: 100px;
        background-color: crimson;
        color: whitesmoke;
        font-weight: 500;
    }

    .text-bottom-right-in-a-cart{
        width: 150px;
        background-color: #c5b358;
    }

    /*#sale-products-holder{
        display: inline-block;
        margin-top: 30px;
        margin-left: 180px;
    }

        #sale-product-pres{
            float: left;
            margin-right: 20px;
            margin-bottom: 20px;
        }

        #sale-product-pres a{
            text-decoration: none;
        }

        #sale-product-pres img{
            width: 200px;
            height: 250px;
        }*/

        /*#product-info-holder{
            background-color: #ebebe0;
        }

        #product-info-holder h5{
            margin-top: 2px;
            margin-bottom: 2px;
            margin-left: 4px;
        }

        #product-info-holder p{
            margin-left: 4px;
            margin-top: 0;
            margin-bottom: 2px;
            font-weight: 500;
            font-size: medium;
        }*/
        
</style>

<div class="sale-general-info">
    <div class="sale-gen-image">
        <img src="@Model.Picture" alt="@Model.Title" />
    </div>
    <div class="sale-gen-text">
        <h2>@Model.Title</h2>
        <h4><span style="font-weight: bold">Ends On:</span> @Model.EndsOn</h4>
    </div>
</div>

<div id="all-products-container">
    @foreach (var product in Model.Products)
    {
    <div id="product-holder">
        @if (product.ShoppingCartId != null)
        {
            <div class="text-over-image">
                <a href="/Administration/Product/Details/@product.Id"><img src="@product.MainPicture" alt="@product.Name" /></a>
                <div class="text-bottom-right-in-a-cart">Currently in a Cart</div>
            </div>
        }
        else if (product.OrderId != null)
        {
            <div class="text-over-image">
                <img src="@product.MainPicture" alt="@product.Name" />
                <div class="text-bottom-right-sold-out">Sold Out</div>
            </div>
        }
        else
        {
            if (this.User.Identity.IsAuthenticated && this.User.IsInRole("Admin"))
            {
                <a href="/Administration/Product/Details/@product.Id"><img src="@product.MainPicture" alt="@product.Name" /></a>
            }
            else
            {
                <a href="/Products/Details/@product.Id"><img src="@product.MainPicture" alt="@product.Name" /></a>
            }
        }
        <div class="product-info-holder">
            <a href="/Administration/Product/Details/@product.Id"><h4>@product.Name</h4></a>
            <h4 style="margin-top: 1px">&euro;<strike>@product.OldPrice</strike> &euro;@product.NewPrice</h4>
        </div>
    </div>
     }
</div>
                @*<div id="sale-products-holder">
                        @foreach(var product in Model.Products)
                        {
                            <div id="sale-product-pres">
                                <a href="/Products/Details/@product.Id"><img src="@product.MainPicture" alt="@Model.Title - @product.Name" /></a>
                                <div id="product-info-holder">
                                    <a href="/Products/Details/@product.Id"><h5>@product.Name</h5></a>
                                    <p><strike>&euro;@product.OldPrice</strike> &euro;@product.NewPrice</p>
                                    @if (product.AvailableItems < 1)
                                    {
                                        <h3>Sold Out</h3>
                                    }
                                </div>
                            </div>
                        }
                    </div>*@
